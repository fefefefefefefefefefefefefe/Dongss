회원가입 필드 

ALTER TABLE `user`
  ADD COLUMN student_no     VARCHAR(32)  NOT NULL UNIQUE AFTER id,
  ADD COLUMN name           VARCHAR(191) NULL AFTER email,
  ADD COLUMN nickname       VARCHAR(191) NULL UNIQUE AFTER name,
  ADD COLUMN gender         ENUM('male','female') NULL AFTER nickname,
  ADD COLUMN department     VARCHAR(191) NULL AFTER gender,
  ADD COLUMN birthday       DATE         NULL AFTER department,
  ADD COLUMN university     VARCHAR(191) NOT NULL DEFAULT '동서울대학교' AFTER birthday,
  ADD COLUMN email_verified TINYINT(1)   NOT NULL DEFAULT 0 AFTER university,
  ADD COLUMN verification_token   VARCHAR(64)  NULL AFTER email_verified,
  ADD COLUMN verification_sent_at DATETIME     NULL AFTER verification_token;
  ADD COLUMN `token_version` INT NOT NULL DEFAULT 0;

토큰 버전

ALTER TABLE `user`
ADD COLUMN `token_version` INT NOT NULL DEFAULT 0;

refresh_token DB 깔기

CREATE TABLE `refresh_token` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `user_id` INT NOT NULL,
  `token_hash` VARCHAR(128) NOT NULL,
  `created_at` DATETIME(0) NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `expires_at` DATETIME(0) NOT NULL,
  `revoked_at` DATETIME(0) NULL,
  `replaced_by` VARCHAR(128) NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `refresh_token_token_hash_key` (`token_hash`),
  KEY `idx_rtoken_user` (`user_id`),
  CONSTRAINT `fk_rtoken_user` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- 1) 멤버 역할 컬럼
ALTER TABLE community_member
  ADD COLUMN role VARCHAR(20) NOT NULL DEFAULT 'MEMBER';

-- 2) 게시글 카테고리/삭제 플래그
ALTER TABLE post
  ADD COLUMN category VARCHAR(16) NULL AFTER content,
  ADD COLUMN is_deleted TINYINT(1) NOT NULL DEFAULT 0 AFTER category;

-- 3) 커뮤니티 탭 조회 최적화 인덱스
CREATE INDEX idx_post_comm_cat_created
  ON post (community_id, category, created_at);

-- (관계명 변경은 Prisma 레벨의 모델 필드명만 바뀐 것이라 DB 스키마에는 영향 없음)

